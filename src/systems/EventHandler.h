////////////////////////////////////////////////////////////
// Preprocessor directives
////////////////////////////////////////////////////////////
#pragma once

////////////////////////////////////////////////////////////
// headers
////////////////////////////////////////////////////////////

#include <SFML/Graphics/RenderWindow.hpp>
#include <SFML/Window/Event.hpp>
#include <SFML/Window/Keyboard.hpp>
#include <SFML/Window/Mouse.hpp>
#include <bitset>

// double of each needed for pressed and released events
using EventBitset =
    std::bitset<sf::Keyboard::KeyCount + sf::Keyboard::KeyCount +
                sf::Mouse::ButtonCount + sf::Mouse::ButtonCount>;

namespace steamrot {

class EventHandler {

private:
  ////////////////////////////////////////////////////////////
  // |brief process keyboard events: pressed and released
  ////////////////////////////////////////////////////////////
  void HandleKeyboardEvents(const sf::Event &event);

  ////////////////////////////////////////////////////////////
  // |brief process mouse events: pressed and released
  ////////////////////////////////////////////////////////////
  void HandleMouseEvents(const sf::Event &event);

  EventBitset m_events;

public:
  ////////////////////////////////////////////////////////////
  // |brief default constructor
  ////////////////////////////////////////////////////////////
  EventHandler() = default;

  ////////////////////////////////////////////////////////////
  // |brief process events from the window
  ////////////////////////////////////////////////////////////
  void HandleEvents(sf::RenderWindow &window);

  ////////////////////////////////////////////////////////////
  // |member: bool queried by GameEngine about whether to close the window or
  // not
  ////////////////////////////////////////////////////////////
  bool m_close_window{false};

  const EventBitset &GetEvents() const;
};
} // namespace steamrot
