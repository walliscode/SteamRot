////////////////////////////////////////////////////////////
// Preprocessor directives
////////////////////////////////////////////////////////////
#pragma once

////////////////////////////////////////////////////////////
// headers
////////////////////////////////////////////////////////////
#include <nlohmann/json.hpp>

namespace steamrot {

////////////////////////////////////////////////////////////
// |brief Class to check json files conform to schema
////////////////////////////////////////////////////////////
class SchemaChecker {
private:
  ////////////////////////////////////////////////////////////
  // member data
  ////////////////////////////////////////////////////////////
  nlohmann::json m_jsonSchema;

  ////////////////////////////////////////////////////////////
  // |brief recursively check json schema itself
  ////////////////////////////////////////////////////////////
  void ValidateJSONSchema(const nlohmann::json &schema);

  ////////////////////////////////////////////////////////////
  // |brief create json schema from passed through object
  ////////////////////////////////////////////////////////////
  void CreateJSONSchema(const nlohmann::json &schema);

public:
  ////////////////////////////////////////////////////////////
  // |brief constructor taking in a json object
  ////////////////////////////////////////////////////////////
  SchemaChecker(nlohmann::json schema);

  ////////////////////////////////////////////////////////////
  // |brief checks provided json file based on stored enum value
  ////////////////////////////////////////////////////////////
  bool CheckJSON(nlohmann::json j);
};

} // namespace steamrot
