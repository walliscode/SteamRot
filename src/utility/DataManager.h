
////////////////////////////////////////////////////////////
// Preprocessor directives
////////////////////////////////////////////////////////////
#pragma once

////////////////////////////////////////////////////////////
// headers
////////////////////////////////////////////////////////////

#include "scenes_generated.h"
#include "themes_generated.h"
#include <SFML/Graphics/Font.hpp>
#include <filesystem>
#include <nlohmann/json.hpp>

namespace steamrot {
class DataManager {

private:
  ////////////////////////////////////////////////////////////
  /// \brief check file exists, if not throw error
  ///
  ////////////////////////////////////////////////////////////
  void CheckFileExists(const std::filesystem::path &file_path);

  ////////////////////////////////////////////////////////////
  /// \brief load binary data from file and return as vector of chars
  ////////////////////////////////////////////////////////////
  char *LoadBinaryData(const std::filesystem::path &file_path);

public:
  ////////////////////////////////////////////////////////////
  /// \brief Default constructor
  ///
  ////////////////////////////////////////////////////////////
  DataManager() = default;

  ////////////////////////////////////////////////////////////
  /// \brief provide theme data as flatbuffers data
  ////////////////////////////////////////////////////////////
  const themes::UIObjects *ProvideThemeData(const std::string &theme_name);

  /////////////////////////////////////////////////
  /// @brief Provide scene data as flatbuffers data
  ///
  /// @param scene_type Enum representing the type of scene
  /// @return Return a pointer to the SceneData
  /////////////////////////////////////////////////
  const SceneData *ProvideSceneData(const SceneType &scene_type);

  /////////////////////////////////////////////////
  /// @brief Provide font files for a specific scene type
  ///
  /// @param scene_type Enum representing the type of scene
  /////////////////////////////////////////////////
  std::vector<std::pair<std::string, sf::Font>>
  ProvideFonts(const SceneType &scene_type);
};

} // namespace steamrot
